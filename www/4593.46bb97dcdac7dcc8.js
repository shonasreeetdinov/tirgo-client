"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4593],{3414:(Y,M,f)=>{f.d(M,{Uw:()=>B,fo:()=>J});var P=f(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var E=function(l){return l.Unimplemented="UNIMPLEMENTED",l.Unavailable="UNAVAILABLE",l}(E||{});class x extends Error{constructor(r,u){super(r),this.message=r,this.code=u}}const H=l=>{var r,u,i,o,n;const s=l.CapacitorCustomPlatform||null,e=l.Capacitor||{},c=e.Plugins=e.Plugins||{},a=l.CapacitorPlatforms,v=(null===(r=a?.currentPlatform)||void 0===r?void 0:r.getPlatform)||(()=>null!==s?s.name:(l=>{var r,u;return l?.androidBridge?"android":null!==(u=null===(r=l?.webkit)||void 0===r?void 0:r.messageHandlers)&&void 0!==u&&u.bridge?"ios":"web"})(l)),R=(null===(u=a?.currentPlatform)||void 0===u?void 0:u.isNativePlatform)||(()=>"web"!==v()),ne=(null===(i=a?.currentPlatform)||void 0===i?void 0:i.isPluginAvailable)||(g=>{const m=j.get(g);return!(!m?.platforms.has(v())&&!K(g))}),K=(null===(o=a?.currentPlatform)||void 0===o?void 0:o.getPluginHeader)||(g=>{var m;return null===(m=e.PluginHeaders)||void 0===m?void 0:m.find(O=>O.name===g)}),j=new Map,ue=(null===(n=a?.currentPlatform)||void 0===n?void 0:n.registerPlugin)||((g,m={})=>{const O=j.get(g);if(O)return console.warn(`Capacitor plugin "${g}" already registered. Cannot register plugins twice.`),O.proxy;const _=v(),S=K(g);let L;const ae=function(){var p=(0,P.Z)(function*(){return!L&&_ in m?L=L="function"==typeof m[_]?yield m[_]():m[_]:null!==s&&!L&&"web"in m&&(L=L="function"==typeof m.web?yield m.web():m.web),L});return function(){return p.apply(this,arguments)}}(),z=p=>{let h;const b=(...A)=>{const Z=ae().then(w=>{const T=((p,h)=>{var b,A;if(!S){if(p)return null===(A=p[h])||void 0===A?void 0:A.bind(p);throw new x(`"${g}" plugin is not implemented on ${_}`,E.Unimplemented)}{const Z=S?.methods.find(w=>h===w.name);if(Z)return"promise"===Z.rtype?w=>e.nativePromise(g,h.toString(),w):(w,T)=>e.nativeCallback(g,h.toString(),w,T);if(p)return null===(b=p[h])||void 0===b?void 0:b.bind(p)}})(w,p);if(T){const N=T(...A);return h=N?.remove,N}throw new x(`"${g}.${p}()" is not implemented on ${_}`,E.Unimplemented)});return"addListener"===p&&(Z.remove=(0,P.Z)(function*(){return h()})),Z};return b.toString=()=>`${p.toString()}() { [capacitor code] }`,Object.defineProperty(b,"name",{value:p,writable:!1,configurable:!1}),b},Q=z("addListener"),q=z("removeListener"),ce=(p,h)=>{const b=Q({eventName:p},h),A=function(){var w=(0,P.Z)(function*(){const T=yield b;q({eventName:p,callbackId:T},h)});return function(){return w.apply(this,arguments)}}(),Z=new Promise(w=>b.then(()=>w({remove:A})));return Z.remove=(0,P.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield A()}),Z},G=new Proxy({},{get(p,h){switch(h){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return S?ce:Q;case"removeListener":return q;default:return z(h)}}});return c[g]=G,j.set(g,{name:g,proxy:G,platforms:new Set([...Object.keys(m),...S?[_]:[]])}),G});return e.convertFileSrc||(e.convertFileSrc=g=>g),e.getPlatform=v,e.handleError=g=>l.console.error(g),e.isNativePlatform=R,e.isPluginAvailable=ne,e.pluginMethodNoop=(g,m,O)=>Promise.reject(`${O} does not have an implementation of "${m}".`),e.registerPlugin=ue,e.Exception=x,e.DEBUG=!!e.DEBUG,e.isLoggingEnabled=!!e.isLoggingEnabled,e.platform=e.getPlatform(),e.isNative=e.isNativePlatform(),e},F=(l=>l.Capacitor=H(l))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),J=F.registerPlugin;class B{constructor(r){this.listeners={},this.windowListeners={},r&&(console.warn(`Capacitor WebPlugin "${r.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=r)}addListener(r,u){var i=this;this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(u);const n=this.windowListeners[r];n&&!n.registered&&this.addWindowListener(n);const s=function(){var c=(0,P.Z)(function*(){return i.removeListener(r,u)});return function(){return c.apply(this,arguments)}}(),e=Promise.resolve({remove:s});return Object.defineProperty(e,"remove",{value:(c=(0,P.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield s()}),function(){return c.apply(this,arguments)})}),e;var c}removeAllListeners(){var r=this;return(0,P.Z)(function*(){r.listeners={};for(const u in r.windowListeners)r.removeWindowListener(r.windowListeners[u]);r.windowListeners={}})()}notifyListeners(r,u){const i=this.listeners[r];i&&i.forEach(o=>o(u))}hasListeners(r){return!!this.listeners[r].length}registerWindowListener(r,u){this.windowListeners[u]={registered:!1,windowEventName:r,pluginEventName:u,handler:i=>{this.notifyListeners(u,i)}}}unimplemented(r="not implemented"){return new F.Exception(r,E.Unimplemented)}unavailable(r="not available"){return new F.Exception(r,E.Unavailable)}removeListener(r,u){var i=this;return(0,P.Z)(function*(){const o=i.listeners[r];if(!o)return;const n=o.indexOf(u);i.listeners[r].splice(n,1),i.listeners[r].length||i.removeWindowListener(i.windowListeners[r])})()}addWindowListener(r){window.addEventListener(r.windowEventName,r.handler),r.registered=!0}removeWindowListener(r){r&&(window.removeEventListener(r.windowEventName,r.handler),r.registered=!1)}}},5346:(Y,M,f)=>{f.d(M,{ez:()=>C});var C=function(d){return d.UTF8="utf8",d.ASCII="ascii",d.UTF16="utf16",d}(C||{})},4593:(Y,M,f)=>{f.r(M),f.d(M,{NamePageModule:()=>u});var P=f(6814),C=f(6223),D=f(7331),U=f(5356),d=f(5861),k=f(8882),$=f(1493),E=f(2726);f(5346);const I=(0,E.fo)("Filesystem",{web:()=>f.e(4522).then(f.bind(f,4522)).then(i=>new i.FilesystemWeb)}),V=(0,f(3414).fo)("Http",{web:()=>f.e(5206).then(f.bind(f,5206)).then(i=>new i.HttpWeb),electron:()=>f.e(5206).then(f.bind(f,5206)).then(i=>new i.HttpWeb)});class F extends E.Uw{constructor(){super(...arguments),this.ERROR_PICK_FILE_CANCELED="pickFiles canceled."}convertHeicToJpeg(o){var n=this;return(0,d.Z)(function*(){throw n.unimplemented("Not implemented on web.")})()}pickFiles(o){var n=this;return(0,d.Z)(function*(){const s=yield n.openFilePicker(o);if(!s)throw new Error(n.ERROR_PICK_FILE_CANCELED);const e={files:[]};for(const c of s){const a={blob:c,modifiedAt:c.lastModified,mimeType:n.getMimeTypeFromUrl(c),name:n.getNameFromUrl(c),path:void 0,size:n.getSizeFromUrl(c)};o?.readData&&(a.data=yield n.getDataFromFile(c)),e.files.push(a)}return e})()}pickImages(o){var n=this;return(0,d.Z)(function*(){return n.pickFiles(Object.assign({types:["image/*"]},o))})()}pickMedia(o){var n=this;return(0,d.Z)(function*(){return n.pickFiles(Object.assign({types:["image/*","video/*"]},o))})()}pickVideos(o){var n=this;return(0,d.Z)(function*(){return n.pickFiles(Object.assign({types:["video/*"]},o))})()}openFilePicker(o){var n=this;return(0,d.Z)(function*(){var s;const e=(null===(s=o?.types)||void 0===s?void 0:s.join(","))||"",c=void 0===o?.limit?0:o.limit;return new Promise(a=>{let y=!1;const v=document.createElement("input");v.type="file",v.accept=e,v.multiple=0===c,v.addEventListener("change",()=>{y=!0;const W=Array.from(v.files||[]);a(W)},{once:!0}),window.addEventListener("focus",(0,d.Z)(function*(){yield n.wait(1e3),!y&&a(void 0)}),{once:!0}),v.click()})})()}getDataFromFile(o){return(0,d.Z)(function*(){return new Promise((n,s)=>{const e=new FileReader;e.readAsDataURL(o),e.onload=()=>{const y=("string"==typeof e.result?e.result:"").split("base64,")[1]||"";n(y)},e.onerror=c=>{s(c)}})})()}getNameFromUrl(o){return o.name}getMimeTypeFromUrl(o){return o.type}getSizeFromUrl(o){return o.size}wait(o){return(0,d.Z)(function*(){return new Promise(n=>setTimeout(n,o))})()}}const J=(0,E.fo)("FilePicker",{web:()=>new F});var t=f(2029),X=f(1885),B=f(3999);const l=[{path:"",component:(()=>{class i{constructor(n,s,e,c){this.authService=n,this.router=s,this.app=e,this.modalController=c,this.name="",this.country="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435",this.city="\u043e\u0440\u043e\u0434"}ngOnInit(){}selectRegion(){var n=this;return(0,d.Z)(function*(){const s=yield n.modalController.create({component:$.B,showBackdrop:!0,breakpoints:[0,.9],initialBreakpoint:.9,presentingElement:yield n.modalController.getTop(),backdropDismiss:!0,cssClass:"modalCss",mode:"ios"});yield s.present();const{data:e}=yield s.onWillDismiss();e&&e.city&&(console.log(e.city.data),yield n.authService.saveCityInfo(e.city.data).toPromise().then(function(){var c=(0,d.Z)(function*(a){a.status&&(n.country=e.city.data.country,n.city=e.city.data.city?e.city.data.city:e.city.data.region,n.authService.currentUser&&(n.authService.currentUser.city=e.city.data.city?e.city.data.city:e.city.data.region,n.authService.currentUser.country=e.city.data.country))});return function(a){return c.apply(this,arguments)}}()).catch(function(){var c=(0,d.Z)(function*(a){console.log(a)});return function(a){return c.apply(this,arguments)}}()))})()}regUser(){var n=this;return(0,d.Z)(function*(){n.name&&n.country&&n.city?yield n.authService.regUser(n.name).toPromise().then(function(){var s=(0,d.Z)(function*(e){e.status&&(yield n.app.checkSession(),yield n.router.navigate(["/tabs/home"],{replaceUrl:!0}))});return function(e){return s.apply(this,arguments)}}()).catch(function(){var s=(0,d.Z)(function*(e){});return function(e){return s.apply(this,arguments)}}()):n.authService.alert("\u0423\u043f\u0441","\u0414\u043b\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0412\u0430\u0448\u0435 \u0418\u043c\u044f \u0438 \u0440\u0435\u0433\u0438\u043e\u043d.")})()}cropUpload(){var n=this;return(0,d.Z)(function*(){try{const s=yield J.pickFiles({types:["image/*"]});if(s.files.length>0){const e=s.files[0],c=yield n.readAsBase64(e.uri),a={Authorization:"Bearer "+k.$.jwt,"Content-Type":"multipart/form-data"},y=n.base64ToBlob(c,"image/jpeg"),v=new FormData;v.append("typeUser","client"),v.append("typeImage","avatar"),v.append("file",y,e.name);const R=(yield V.post({url:n.authService.serverApi+"/users/uploadImage",headers:a,data:v})).data;R.status&&(n.authService.currentUser.avatar=R.file.preview)}}catch(s){console.error("Error picking or uploading file",s)}})()}readAsBase64(n){return(0,d.Z)(function*(){return(yield I.readFile({path:n})).data})()}base64ToBlob(n,s){const e=atob(n),c=new Array(e.length);for(let y=0;y<e.length;y++)c[y]=e.charCodeAt(y);const a=new Uint8Array(c);return new Blob([a],{type:s})}static#e=this.\u0275fac=function(s){return new(s||i)(t.Y36(k.$),t.Y36(U.F0),t.Y36(X.y),t.Y36(D.IN))};static#t=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-name"]],decls:31,vars:24,consts:[[1,"ion-padding"],[1,"reg-profile"],["src","/assets/logos/tirgo-logo.png","alt","\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",1,"reg-profile__logo"],[1,"reg-profile__main","form"],[1,"reg-profile__photo",3,"click"],["alt","\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",3,"src"],[1,"reg-profile__inputs"],[1,"form__group"],[1,"form__label"],[1,"form__input"],["type","text",3,"placeholder","ngModel","ngModelChange"],[1,"form__group",3,"click"],["type","text","readonly","",3,"placeholder","value"],[1,"reg-profile__text"],[1,"reg-profile__btn","btn",3,"click"],[1,"icm-arrow"]],template:function(s,e){1&s&&(t.TgZ(0,"ion-content",0)(1,"article",1),t._UZ(2,"img",2),t.TgZ(3,"section",3)(4,"div",4),t.NdJ("click",function(){return e.cropUpload()}),t._UZ(5,"img",5),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"div",6)(10,"label",7)(11,"span",8),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",9)(15,"input",10),t.NdJ("ngModelChange",function(a){return e.name=a}),t.ALo(16,"translate"),t.qZA()()(),t.TgZ(17,"label",11),t.NdJ("click",function(){return e.selectRegion()}),t.TgZ(18,"span",8),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"div",9),t._UZ(22,"input",12),t.ALo(23,"translate"),t.qZA()()(),t.TgZ(24,"p",13),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"button",14),t.NdJ("click",function(){return e.regUser()}),t._uU(28),t.ALo(29,"translate"),t._UZ(30,"i",15),t.qZA()()()()),2&s&&(t.xp6(5),t.Q6J("src",null==e.authService.currentUser?null:e.authService.currentUser.avatar,t.LSH),t.xp6(2),t.Oqu(t.lcZ(8,10,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e")),t.xp6(5),t.Oqu(t.lcZ(13,12,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0412\u0430\u0448\u0435 \u0424\u0418\u041e")),t.xp6(3),t.s9C("placeholder",t.lcZ(16,14,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0412\u0430\u0448\u0435 \u0424\u0418\u041e")),t.Q6J("ngModel",e.name),t.xp6(4),t.Oqu(t.lcZ(20,16,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0430\u0448 \u0440\u0435\u0433\u0438\u043e\u043d")),t.xp6(3),t.s9C("placeholder",t.lcZ(23,18,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0430\u0448 \u0440\u0435\u0433\u0438\u043e\u043d")),t.Q6J("value",e.country+" \u0433"+e.city),t.xp6(3),t.hij(" ",t.lcZ(26,20,"\u0427\u0442\u043e\u0431\u044b \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430, \u0432\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442, \u0438\u043b\u0438 \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c\u0441\u044f \u0432 \u0441\u043b\u0443\u0436\u0431\u0443 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438")," "),t.xp6(3),t.hij(" ",t.lcZ(29,22,"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")," "))},dependencies:[C.Fj,C.JJ,C.On,D.W2,B.X$],styles:[".reg-profile[_ngcontent-%COMP%]{flex:1 1 auto;display:flex;flex-direction:column}.reg-profile__logo[_ngcontent-%COMP%]{width:13.75rem;margin:1.25rem 0 3.125rem}.reg-profile__main[_ngcontent-%COMP%]{display:grid;align-items:start;flex:1 1 auto}.reg-profile__inputs[_ngcontent-%COMP%]{display:grid}.reg-profile__photo[_ngcontent-%COMP%]{margin-bottom:1.875rem;display:flex;align-items:center}.reg-profile__photo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5.625rem;height:5.625rem;object-fit:cover;border-radius:50%;margin-right:1.25rem}.reg-profile__photo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-weight:600}.reg-profile__text[_ngcontent-%COMP%]{color:#fff;padding:.625rem 0}.reg-profile__btn[_ngcontent-%COMP%]{align-self:end}"]})}return i})()}];let r=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[U.Bz.forChild(l),U.Bz]})}return i})(),u=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[P.ez,C.u5,D.Pc,r,B.aw]})}return i})()}}]);